<!DOCTYPE html>
<html lang="ky">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>CAPIFAN ‚Äî —Ç–∞–±–∏—è—Ç—Ç–∞–Ω —Å–∏–∑–¥–∏–Ω –¥–∞—Å—Ç–æ—Ä–∫–æ–Ω—É“£—É–∑–≥–∞</title>
  <meta name="theme-color" content="#d86916"/>
  <link rel="manifest" href="manifest.json?v=2">

  <!-- iOS / iPadOS app icon -->
  <link rel="apple-touch-icon" sizes="120x120" href="icons/ios-120x120.png?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/ios-180x180.png?v=2">
  <link rel="apple-touch-icon" sizes="1024x1024" href="icons/ios-1024x1024.png?v=2">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  
  <style>
    :root{--mango:#f3a21b;--honey:#d86916;--ink:#1e293b;--muted:#64748b;--card:#fff;--bg:#fff7ec}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica,Arial;color:var(--ink);background:linear-gradient(180deg,#fff,var(--bg))}
    .topbar{position:sticky;top:0;z-index:5;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px;background:rgba(255,255,255,.88);backdrop-filter:saturate(1.2) blur(6px);border-bottom:1px solid #ffe1ad}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:42px;height:42px;border-radius:12px;background:radial-gradient(100% 100% at 30% 30%, var(--mango), var(--honey));box-shadow:0 6px 20px rgba(216,105,22,.25)}
    .brand-name{font-weight:800} .slogan{font-size:12px;color:var(--muted)}
    .controls{display:flex;align-items:center;gap:8px}
    select,.btn,input{border:1px solid #ffd489;background:#fff;color:var(--ink);padding:8px 10px;border-radius:12px;font:inherit}
    .btn.mango{background:linear-gradient(180deg,#fff8eb,#ffe3b3);font-weight:700;cursor:pointer}
    .shell{max-width:1100px;margin:0 auto;padding:16px}
    .notice{margin:10px 16px;padding:10px 12px;border:1px dashed #ffd08a;border-radius:12px;background:#fff7e8;color:#6a3c13;font-weight:600}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
    .card{background:var(--card);border:1px solid #ffe1ad;border-radius:18px;padding:14px;box-shadow:0 6px 16px rgba(243,162,27,.08);display:flex;flex-direction:column;gap:10px}
    .card img{width:100%;height:160px;object-fit:cover;border-radius:12px;border:1px solid #ffe1ad}
    .qty{display:flex;align-items:center;gap:8px}.qty .q{min-width:22px;text-align:center;display:inline-block}

    .popup{position:fixed; inset:0; z-index:1000; display:block; pointer-events:none;}
    .popup.open{ pointer-events:auto; }
    .backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35); opacity:0; transition:opacity .2s ease;}
    .popup.open .backdrop{ opacity:1; }
    .panel{position:fixed; left:0; right:0; bottom:0;
      top: calc(env(safe-area-inset-top, 0px) + 64px);
      background:#fff; border-top-left-radius:18px; border-top-right-radius:18px;
      border-left:0; box-shadow:0 -10px 30px rgba(0,0,0,.15);
      width:auto; max-height: calc(100dvh - env(safe-area-inset-top) - 64px);
      transform: translateY(100%); transition: transform .25s ease;
      display:flex; flex-direction:column;
      padding:calc(12px + env(safe-area-inset-top, 0px)) 16px calc(14px + env(safe-area-inset-bottom, 0px));
      overflow:hidden;}
    .popup.open .panel{ transform: translateY(0); }
    .panel #cartItems{ flex:1; overflow:auto; -webkit-overflow-scrolling:touch; }
    body.no-scroll{ overflow:hidden; height:100dvh; }

    .badge{background:#dc2626;color:#fff;border-radius:999px;min-width:18px;padding:2px 6px;font-size:12px}
    .foot{color:var(--muted);text-align:center;padding:16px}

    .btn-remove {background: linear-gradient(180deg, rgba(255, 0, 0, 0.12), rgba(255, 0, 0, 0.18));
      border: 1px solid rgba(255, 0, 0, 0.25); color: #000000 !important; font-weight: 600;
      cursor: pointer; transition: transform 0.05s ease, background 0.2s ease;
      border-radius: 12px; padding: 8px 10px;}
    .btn-remove:hover { background: linear-gradient(180deg, rgba(255, 0, 0, 0.18), rgba(255, 0, 0, 0.25)); }
    .btn-remove:active { transform: scale(0.97); }

    #closeCart {background: linear-gradient(180deg, #d1f7d1, #a6e3a6);
      border: 1px solid #6ccf6c; color: #000; font-weight: 700;
      cursor: pointer; border-radius: 12px; padding: 8px 10px;}
    #closeCart:hover {background: linear-gradient(180deg, #a6e3a6, #8cd88c);}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <div class="brand-name">CAPIFAN</div>
        <div class="slogan" id="slogan">—Ç–∞–±–∏—è—Ç—Ç–∞–Ω —Å–∏–∑–¥–∏–Ω –¥–∞—Å—Ç–æ—Ä–∫–æ–Ω—É“£—É–∑–≥–∞</div>
      </div>
    </div>
    <div class="controls">
      <label for="lang">üåê</label>
      <select id="lang" aria-label="Language">
        <option value="ky" selected>üá∞üá¨ –öY</option>
        <option value="ru">üá∑üá∫ RU</option>
        <option value="es">üá™üá∏ ES</option>
        <option value="en">üá¨üáß EN</option>
      </select>
      <button id="btnCart" class="btn mango">üõí <span id="cartTxt">–°–µ–±–µ—Ç</span> <span id="cartCount" class="badge" style="display:none">0</span></button>
    </div>
  </header>

  <main class="shell">
    <div class="notice" id="pricesNote">–ë–∞–∞–ª–∞—Ä USD –∂–∞–Ω–∞ KGS –º–µ–Ω–µ–Ω. ”®–ª—á”©–º–¥“Ø ”©–∑–≥”©—Ä—Ç“Ø–ø –±–∞–∞–Ω—ã –∫”©—Ä“Ø“£“Ø–∑.</div>
    <section id="products" class="grid"></section>
  </main>

  <!-- Cart -->
  <aside id="cart" class="popup" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
    <div class="backdrop" id="backdrop"></div>
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2 id="cartTitle">–°–µ–±–µ—Ç</h2>
        <button class="btn" id="closeCart" aria-label="Cerrar">‚úï</button>
      </div>
      <div id="cartItems"></div>
      <div id="totals" style="margin-top:8px;font-weight:800">TOTAL: 0 —Å–æ–º / $0.00</div>

      <!-- üëá Campos obligatorios -->
      <div style="display:flex;flex-direction:column;gap:8px;margin-top:12px">
        <input id="customerName" type="text" placeholder="Nombre del cliente" required>
        <input id="customerPhone" type="tel" placeholder="Tel√©fono del cliente" required>
        <input id="customerEmail" type="email" placeholder="Email del cliente" required>
      </div>

      <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
        <button id="confirm" class="btn mango">‚úÖ Confirmar pedido</button>
      </div>
      <small id="postNote" style="color:#64748b"></small>
    </div>
  </aside>

  <footer class="foot">¬© 2025 CAPIFAN ‚Äì elcapiproduct@gmail.com</footer>

  <!-- Tu JS queda enlazado aparte o inline -->
  <script src="script.js"></script>
</body>
</html>
